define("service/ajax",["require","exports","module"],function(e,t){t.post=function(e,t,n){return n=n||{},t=t||{},$.ajax({url:e,data:t,method:"POST",type:"POST",dataType:"json",timeout:2e4,beforeSend:n.beforeSend||function(){var e=(new Date).getTime();n._time=e,n.holder&&n.holder.append('<div class="loading loading-'+e+'">').addClass("relative")},contentType:"application/x-www-form-urlencoded;charset=UTF-8",async:n.sync?!1:!0}).pipe(function(e){n.holder&&n.holder.removeClass("relative").find(".loading-"+n._time).remove();if(e.err_no===0)return e;if(e.err_no!==302){var i=$.Deferred();return i.reject(e),i.promise()}var t={online:"http://mis.diditaxi.com.cn/auth/sso/login?app_id=94",offline:"http://mis-test.diditaxi.com.cn/auth/sso/login?app_id=99"},r=encodeURIComponent(location.href);location.href=t.online+"&version=1.0&jumpto="+r})},t.jsonp=function(e,t,n){return $.ajax({url:e,data:t,dataType:"jsonp",timeout:n,scriptCharset:"UTF-8"}).pipe(function(e){if(e.err_no===0)return e;if(e.err_no!==302){var r=$.Deferred();return commonErrors[e.err_no]?r.reject(e):r.reject(e),r.promise()}var t={online:"http://mis.diditaxi.com.cn/auth/sso/login?app_id=94",offline:"http://mis-test.diditaxi.com.cn/auth/sso/login?app_id=99"},n=encodeURIComponent(location.href);location.href=t.online+"&version=1.0&jumpto="+n})}}),define("service/task-result",["require","exports","module","service/ajax"],function(e,t){var n=e("service/ajax");t.getTaskResult=function(e){return n.post("/omega-compute/compute-api/get_task_result",e)}}),define("common/utils",["require","exports","module"],function(e,t){t.deepCopy=function(e){var t,n=e.constructor;return function r(e,n,i){var s=e&&e.constructor,o,u,a,f,l=n===undefined;if(s===Object){o=l?t={}:n[i]={};for(u in e)r(e[u],o,u)}else if(s===Array){a=0,f=e.length,o=l?t=[]:n[i]=[];while(a<f)r(e[a],o,a++)}else if(s===Function)try{n[i]=(new Function("return "+e.toString()))()}catch(c){n[i]=e}else typeof e=="object"?n[i]=new s(e):n[i]=e}(e),t},t.getQuery=function(e){var t=location.search;if(!arguments.length){var n={};return t?(t.replace(/(?:\?|&)([^=]+)=([^&$]*)/g,function(e,t,r){n[t]=decodeURIComponent(r)}),n):n}var r=(new RegExp("[?&]"+e+"=([^&$]*)")).exec(t);return r&&decodeURIComponent(r[1])},t.format=function(e,t,n){return typeof e=="undefined"?"":(t=t||",",n=n||3,(""+e).replace(new RegExp("(\\d{1,"+n+"})(?=(\\d{"+n+"})+(?:$|\\.))","g"),"$1"+t))},t.parseToDate=function(e){return t.toDate(t.parseToTimestamp(e))},t.parseToTimestamp=function(e){return Date.parse(e.replace(/\-/g,"/"))},t.addDay=function(e,n){var r=t.toDate(t.toTimestamp(e));return r.setDate(r.getDate()+n),r},t.toYMD=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return n<10&&(n="0"+n),r<10&&(r="0"+r),t+"-"+n+"-"+r},t.toYMDHMS=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),s<10&&(s="0"+s),o<10&&(o="0"+o),t+"-"+n+"-"+r+" "+i+":"+s+":"+o},t.toTimestamp=function(e){return e.getTime()},t.toDate=function(e){return new Date(e)},t.compareTo=function(e,n){return t.toTimestamp(e)-t.toTimestamp(n)},t.offsetOfWeek=function(e){return(e.getDay()||7)-1},t.firstOfWeek=function(e){return t.addDay(e,-t.offsetOfWeek(e))},t.getFormData=function(e,t){var n={};return t=t||"[name]",e.find(t).each(function(){n[this.name]=this.value}),n};var n=t.formatJSON=function(e,t,r){if(null==e)return""+e;r=r||"";var i=e.constructor;if(i===String)return t?'<span class="json-string-value">"'+e+'"</span>':'"'+e+'"';if(i===Number)return t?'<span class="json-number-value">'+e+"</span>":e;if(i===Array){var s=t?'<span class="json-array-tag">[</span>\n':"[\n";for(var o=0,u=e.length;o<u-1;o++)s+=r+"	"+n(e[o],t,r+"	")+",\n";return s+=r+"	"+n(e[u-1],t,r+"	")+"\n",s+r+(t?'<span class="json-array-tag">]</span>':"]")}if(i===Object){var a=t?'<span class="json-object-tag">{</span>\n':"{\n",f=!0;for(var l in e)f=!1,a+=r+"	"+(t?'<span class="json-object-key">"'+l+'"'+"</span>":'"'+l+'"')+": "+n(e[l],t,r+"	")+",\n";return f||(a=a.slice(0,-2)),a+"\n"+r+(t?'<span class="json-object-tag">}</span>':"}")}}}),Simplite.compiles["task-result-main"]=function(e){return function(e){"use strict";var t=this,n='<div class="row"><div class="item-title">任务结果</div><div class="row item-body"><div class="col-md-12"><ul class="nav nav-tabs"><li role="presentation" class="active" data-idx="0" data-type="taskinfo"><a href="javascript:;">任务信息</a></li><li role="presentation" data-idx="1" data-type="loginfo"><a href="javascript:;">运行日志</a></li><li role="presentation" data-idx="2" data-type="result"><a href="javascript:;">执行结果</a></li><li role="presentation" data-idx="3" data-type="chart"><a href="javascript:;">图表展示</a></li></ul><div class="nav-contents"><div></div><div></div><div></div><div></div></div></div></div></div> ';return n}.call(Simplite,e)},Simplite.compiles["task-result-main-result-table"]=function(e){return function(e){"use strict";var t=this,n="";for(var r=0,i=e.length;r<i;r++){var s=e[r];n+='<div class="table-container"><table class="table table-bordered task-result-table"><thead><tr>';var o=s.keys.length;for(var u=0;u<o;u++)n+="<th>"+t.defaultAttr(s.keys[u])+"</th>";n+="</tr></thead><tbody>";var a=s.data.length;if(a){for(var u=0;u<a;u++){var f=s.data[u];n+="<tr>";for(var l=0;l<f.length;l++){n+="<td>";var c=f[l];typeof c=="object"&&(c=JSON.stringify(c)),n+=""+t.defaultAttr(c)+"</td>"}n+="</tr>"}n+=""}else n+='<tr><td rowspan="'+t.defaultAttr(o)+'">没有查询到数据</td></tr>';n+="</tbody></table></div>"}return n+=" ",n}.call(Simplite,e)},define("task-result/main",["require","exports","module","service/task-result","common/utils","common/utils"],function(e,t){var n=e("service/task-result"),r=e("common/utils").getQuery(),i=e("common/utils").formatJSON,s={taskinfo:function(e,t){t.html("<pre>"+i(e,!0)+"</pre>")},loginfo:function(e,t){t.html("<pre>"+e.debug+"</pre>")},result:function(e,t){var n=Simplite.render("task-result-main-result-table",e.result);t.html(n)},chart:function(e,t){t.html(e)}},o=function(e,t){n.getTaskResult({type:e,taskid:r.id,historyid:r.hid}).done(function(n){s[e](n.data,t)})};t.init=function(){var e=this.element,t=Simplite.render("task-result-main");e.html(t);var n=e.find(".nav-contents > div"),r=e.find(".nav-tabs > li");e.on("click",".nav-tabs > li",function(){n.hide(),r.removeClass("active"),$(this).addClass("active"),o($(this).data("type"),$(n.get($(this).data("idx"))).show())}),$(r.get(2)).trigger("click")}});