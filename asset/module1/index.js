define("service/commonErrors",["require","exports","module"],function(e,t){"use strict";t[100001]="数据库连接错误",t[100002]="数据库查询错误",t[100003]="请求参数错误";var n=function(e){}}),define("service/ajax",["require","exports","module","./commonErrors"],function(e,t){var n=e("./commonErrors");t.post=function(e,t,r){return r=r||{},t=t||{},$.ajax({url:e,data:JSON.stringify(t),method:"POST",type:"POST",dataType:"json",contentType:"application/json;charset=UTF-8",async:r.sync?!1:!0}).pipe(function(e){if(e.status===200)return e;var t=$.Deferred();return+e.status===700?location.href="https://i.genshuixue.com/login?next="+encodeURIComponent(location.href):n[e.status]?t.reject(e):t.reject(e),t.promise()})},t.jsonp=function(e,t,n){return $.ajax({url:e,data:t,dataType:"jsonp",timeout:n})}}),define("service/module1/indexService",["require","exports","module","service/ajax"],function(e,t){var n=e("service/ajax");t.getSomeData=function(e){return n.post("/module1/common/user.ajax",{id:e})}}),define("module1/common/user",["require","exports","module"],function(e,t){t.init=function(){var e=$.Deferred();return e.resolve(888),e.promise()}}),define("module1/sub1",["require","exports","module"],function(e,t){"use strict";t.init=function(e){var t=this.element,n=this.eventEmitter,r=this.data,i=$.Deferred();return setTimeout(function(){t.html(Simplite.render("module1-index-sub",{name:r.userName,list:[{date:"2015-10-10",natureFlow:100,scoreCost:222,tgFlow:30},{date:"2015-10-11",natureFlow:381,scoreCost:334,tgFlow:41},{date:"2015-10-12",natureFlow:230,scoreCost:456,tgFlow:23}]})),i.resolve()},1e3),i.promise()}}),define("module1/sub2",["require","exports","module"],function(e,t){"use strict";t.init=function(e){var t=this.element,n=this.eventEmitter,r=this.data;t.html(Simplite.render("module1-index-sub2","哈哈测试传递的参数")),t.on("click","div",function(){n.fire("sub2-clicked",{id:23})})}}),define("tpl/tpl/module1/index.tpl",[],function(){var e=/\{\{\s*\-\-\s*tpl\s*\:\s*([^\}\s]+)\s*\-\-\s*\}\}\s*([\s\S]+?)\{\{\s*\-\-\s*\/tpl\s*\-\-\s*\}\}/g;'{{ -- tpl:module1-index-sub -- }} <div> 用户名：<%= _this.name %> </div> <table class="table"> <thead> <tr> <th class="width-126">日期</th> <th>浏览量</th> <th>消耗学分</th> <th>推广增量</th> </tr> </thead> <tbody> <% var tmp; %> <% for(var i = 0, len = _this.list.length ; i < len; i++) { tmp = _this.list[i]; %> <tr> <td> <%= tmp.date %> </td> <td><%= (tmp.natureFlow + tmp.tgFlow) %></td> <td><%= tmp.scoreCost %></td> <td class="text-highlight"> <%= tmp.tgFlow %> </td> </tr> <% } %> </tbody> </table> <div data-module-path="module1/sub2"></div> {{ -- /tpl -- }} {{ -- tpl:module1-index-sub2 -- }} <div> 这个是子模块2 </div> <% include(\'module1-index-sub2-include\') %> {{ -- /tpl -- }} {{ -- tpl:module1-index-sub2-include -- }} <p> 通过include传递参数<%= _this %> </p> {{ -- /tpl -- }}'.replace(e,function(e,t,n){Simplite.addTemplate(t,n),Simplite.compile(t,Simplite)})}),define("module1/index",["require","exports","module","service/module1/indexService","tpl/tpl/module1/index.tpl","./common/user","./sub1","./sub2"],function(e,t){"use strict";var n=e("service/module1/indexService");e("tpl/tpl/module1/index.tpl"),e("./common/user"),e("./sub1"),e("./sub2"),t.init=function(e){var t=this.element,r=this.eventEmitter,i=this.data;return t.on("click",".main",function(){alert("module main clicked")}),r.on("sub2-clicked",function(e){alert(e.id)}),n.getSomeData({id:e}).done(function(e){t.find("div").data("userName",e.data.name)})}});